"use strict";Object.defineProperty(exports, "__esModule", {value: true});var v=Object.defineProperty;var n=(t,e)=>v(t,"name",{value:e,configurable:!0});var _path = require('path');var _fs = require('fs');var H=n(t=>_fs.lstatSync.call(void 0, t).isDirectory(),"isDir"),f=n(t=>_fs.existsSync.call(void 0, t),"hasFile"),_=n(t=>_fs.readdirSync.call(void 0, t).reduce((o,s)=>{let r=_path.join.call(void 0, t,s);return H(r)&&o.push({dirName:s,dirPath:r}),o},[]),"getDirs");function g(t,e){let o=n(r=>Object.prototype.toString.call(r)==="[object Object]","isObject"),s=n((r,c)=>o(r)&&Object.prototype.hasOwnProperty.call(r,c),"hasKey");for(let r in e)s(t,r)?o(e[r])&&g(t[r],e[r]):t[r]=e[r];return t}n(g,"mergeConfig");var h=n(t=>Object.prototype.toString.call(t)==="[object Function]","isFunction"),d=class d{static has(e,o){return h(Reflect.has)?Reflect.has(e,o):Object.prototype.hasOwnProperty.call(e,o)}static deleteProperty(e,o){return h(Reflect.deleteProperty)?Reflect.deleteProperty(e,o):delete e[o]}};n(d,"ReflectPolyfill");var u=d,y=class y{static startWith(e,o){return h(String.prototype.startsWith)?e.startsWith(o):e.slice(0,o.length)===o}};n(y,"StringPolyfill");var m=y;function j(t){try{let e=_fs.readFileSync.call(void 0, t,"utf-8");return JSON.parse(e)}catch(e){process.exit(0)}}n(j,"getJson");function N(t,e){var r,c,i,a;let o=(c=(r=t.compilerOptions)==null?void 0:r.paths)!=null?c:{},s=(a=(i=e.compilerOptions)==null?void 0:i.paths)!=null?a:{};for(let p in o)u.has(s,p)||(s[p]=o[p]);return Object.assign({},e,{compilerOptions:Object.assign({},e.compilerOptions,{paths:s})})}n(N,"mergeJson");function k(t,e,o){let{name:s}=_path.parse.call(void 0, e);return{compilerOptions:{paths:Object.keys(t).reduce((c,i)=>{if(m.startWith(i,o)&&i!==o){let{name:a}=_path.parse.call(void 0, t[i]);c["".concat(i,"/*")]=["".concat(s,"/").concat(a,"/*")]}return c["".concat(o,"/*")]=["".concat(s,"/*")],c},{}),baseUrl:"./"}}}n(k,"genJson");function F({aliasPath:t,jsJson:e,tsJson:o,alias:s,prefix:r,root:c,mode:i}){let a=k(s,c,r);if(t&&f(t)&&i==="sync"){let p=j(t),l=N(a,p);f(t)&&_fs.writeFileSync.call(void 0, t,JSON.stringify(l,null,4));return}if(f(e)&&i==="sync"){let p=j(e),l=N(a,p);f(e)&&_fs.writeFileSync.call(void 0, e,JSON.stringify(l,null,4))}if(f(o)&&i==="sync"){let p=j(o),l=N(a,p);f(o)&&_fs.writeFileSync.call(void 0, o,JSON.stringify(l,null,4))}}n(F,"syncJson");var P="vue-cli-plugin-inject-alias",C=n(t=>({root:_path.resolve.call(void 0, t,"src"),prefix:"@",mode:"sync"}),"defaultConfig"),T=n(t=>({ALIAS_JSON_PATH:null,JSON_CONFIG_PATH:_path.resolve.call(void 0, t,"jsconfig.json"),TS_CONFIG_PATH:_path.resolve.call(void 0, t,"tsconfig.json")}),"default");var L=n((t,e)=>({[P]:{root:_path.join.call(void 0, t,"src"),prefix:e.prefix,mode:e.mode}}),"getPluginConfig");function R(t,e){return _(t).reduce((s,r)=>{let c="".concat(e).concat(r.dirName),i=r.dirPath;return s[c]=i,s},{})}n(R,"genAlias");function U(t,e){let{pluginOptions:o={}}=e,s=t.getCwd(),{ALIAS_JSON_PATH:r,JSON_CONFIG_PATH:c,TS_CONFIG_PATH:i}=T(s),{mode:a,prefix:p,root:l}=g(o,L(s,C(s)))[P];f(l)&&t.configureWebpack(O=>{let b={};O.resolve&&O.resolve.alias&&(b=O.resolve.alias);let A=Object.assign({},R(l,p),b);return F({aliasPath:r,jsJson:c,tsJson:i,alias:A,root:l,prefix:p,mode:a}),{resolve:{alias:A}}})}n(U,"alias");var at=U;exports.default = at;

module.exports = exports.default